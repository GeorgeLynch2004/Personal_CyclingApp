<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}">
    <title>Builder</title>
    <link rel="stylesheet" th:href="@{/scripts/css/global.css}">
    <link rel="stylesheet" th:href="@{/scripts/css/navbar.css}">
    <link rel="stylesheet" th:href="@{/scripts/css/workouts.css}">
    <link rel="stylesheet" th:href="@{/scripts/css/form.css}">
    <link rel="stylesheet" th:href="@{/scripts/css/intervalItem.css}">
</head>
<body>
    <div th:replace="fragments/navbar :: navbar"></div>
    <div class="section-container">
        <h1>Workout Builder</h1>
        <div id="workoutGraph" class="workout-graph">
            <canvas id="workoutGraphCanvas" class="workout-graph"></canvas>
        </div>
        <div class="two-row-container">
            <div class="interval-item-container">
                <form name="addIntervalForm" id="addIntervalForm">
                    <div class="form-field">
                        <label for="intervalDuration">
                            Interval Duration</label>
                        <input type="number" name="intervalDuration" id="intervalDuration" placeholder="Duration"/>
                    </div>
                    <div class="form-field">
                        <label for="intervalZone">
                            Target Power Zone</label>
                        <input type="number" name="intervalZone" id="intervalZone" placeholder="Power Zone"/>

                    </div>
                    <div class="form-field">
                        <label for="intervalCadence">
                            Target Cadence</label>
                        <input type="number" name="intervalCadence" id="intervalCadence" placeholder="Cadence"/>

                    </div>

                    <button class="form-button" type="click" id="intervalSubmitButton">Add</button>
                </form>

            </div>
            <div class="interval-item-container" id="intervalsList">
                <template id="intervalItemTemplate">
                    <div id="intervalItemCard" class="interval-item-card">
                        <p id="intervalItemDuration" class="interval-item-data">Duration: 0m 0s</p>
                        <p id="intervalItemZone" class="interval-item-data">Zone: Threshold</p>
                        <p id="intervalItemCadence" class="interval-item-data">Cadence: 00rpm</p>
                        <div class="interval-item-actions">
                            <button class="workout-expandButton" id="intervalItemUpBtn">↑</button>
                            <button class="workout-expandButton" id="intervalItemDownBtn">↓</button>
                            <button class="workout-expandButton" id="intervalItemRemoveBtn">X</button>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>
    <div class="section-container">
        <h1>Finished?</h1>
        <form name="workoutForm" id="workoutForm">
            <div class="form-field">
                <label for="workoutName">
                    Name your masterpiece</label>
                <input type="text" name="workoutName" id="workoutName" placeholder="Name"/>
            </div>
            <div class="form-field">
                <label for="workoutDescription">
                    Add a description</label>
                <textarea name="workoutDescription" id="workoutDescription" placeholder="Description"></textarea>
            </div>
            <div>
                <button type="submit" name="workoutSave" id="workoutSaveBtn">Save to your collection</button>
                <button type="submit" name="workoutPost" id="workoutPostBtn">Post to the site</button>
            </div>
        </form>

    </div>
</body>
<script th:inline="javascript">
    window.APP_USER = {
        username: [[${#authentication.name}]]
    };
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script type="module" th:src="@{/scripts/js/pages/builderPage.js}"></script>
</html>